{"version":3,"sources":["containers/Device.js","views/Devices.js","containers/Flash.js"],"names":["Device","api_key","id","device","setType","setMessage","deleteDevice","axios","delete","then","fetchedData","console","log","data","catch","error","className","type","defaultChecked","onChange","e","state","currentTarget","checked","put","battery","battryLevel","title","batteryLevel","onClick","confirmAlert","message","buttons","label","Devices","API_KEY","useState","devices","setDevices","fetchDevices","undefined","get","useEffect","interval","setInterval","clearInterval","Flash","duration","Object","entries","map","persistOnHover"],"mappings":"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","file":"static/js/15.2f4a01ac.chunk.js","sourcesContent":["import { MdDeleteForever, MdSystemUpdate } from \"react-icons/md\";\nimport { TiBatteryLow, TiBatteryMid, TiBatteryHigh, TiBatteryFull } from \"react-icons/ti\";\n\nimport axios from \"axios\";\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\n\nconst Device = ({api_key, id, device, setType, setMessage}) => {\n\n\n  const deleteAlert = () => {\n    confirmAlert({\n      title: 'Delete device ' + device['name'],\n      message: 'Are you sure to do this?',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => deleteDevice()\n        },\n        {\n          label: 'No'\n        }\n      ]\n    });\n  };\n\n  const deleteDevice = () => {\n    axios.delete(`/api/${api_key}/sensors/${id}`)\n    .then((fetchedData) => {\n      console.log(fetchedData.data);\n      setMessage('Device successfully deleted');\n      setType('none');\n      setType('success');\n    }).catch((error) => {\n      console.error(error)\n      setMessage('Error occured, check browser console');\n      setType('none');\n      setType('error');\n    });\n  }\n\n  const toggleDevice = (state) => {\n    axios.put(`/api/${api_key}/sensors/${id}/config`, {\"on\": state})\n    .then((fetchedData) => {\n      console.log(fetchedData.data);\n      setMessage(device[\"name\"] + ' successfully ' + (state? 'enabled' : 'disabled'));\n      setType('none');\n      setType('success');\n    }).catch((error) => {\n      console.error(error)\n      setMessage('Error occured, check browser console');\n      setType('none');\n      setType('error');\n    });\n  }\n\n  const batteryLevel = () => {\n    let battery = device[\"config\"][\"battery\"];\n    let battryLevel = battery + '%';\n    console.log(battery)\n    if (battery > 90) {\n      return <TiBatteryFull title={battryLevel}/>\n    } else if (battery > 70) {\n      return <TiBatteryHigh title={battryLevel}/>\n    } else if (battery > 40) {\n      return <TiBatteryMid title={battryLevel}/>\n    } else {\n      return <TiBatteryLow title={battryLevel}/>\n    }\n  }\n\n  return (\n    <>\n    {device[\"name\"]} <br/>\n    <div className=\"switchContainer\">\n      <label className=\"switch\">\n        <input type=\"checkbox\"\n          defaultChecked={device['config']['on']}\n          onChange={(e) => toggleDevice(e.currentTarget.checked)}\n        />\n        <span className=\"slider\"></span>\n      </label>\n    </div>\n     Protocol: {device[\"protocol\"]}<br/>\n     {\"battery\" in device[\"config\"] && batteryLevel()}\n    <MdDeleteForever title='Delete' onClick={() => deleteAlert()}/>\n    <br/><br/>\n    </>\n  )\n}\n\nexport default Device\n","import { useState, useEffect } from 'react'\nimport axios from \"axios\";\nimport Device from \"../containers/Device\";\nimport Flash from \"../containers/Flash\"\n\nconst Devices = ({ API_KEY }) => {\n  const [devices, setDevices] = useState({});\n  const [type, setType] = useState('none');\n  const [message, setMessage] = useState('no message');\n\n  const fetchDevices = () => {\n    if (API_KEY !== undefined) {\n      axios\n        .get(`/sensors`)\n        .then((fetchedData) => {\n          console.log(fetchedData.data);\n          setDevices(fetchedData.data);\n        }).catch((error) => { console.error(error) });\n    }\n  }\n\n  useEffect(() => {\n    fetchDevices();\n    const interval = setInterval(() => {\n      fetchDevices();\n    }, 2000); // <<-- ⏱ 1000ms = 1s\n    return () => clearInterval(interval);\n  }, [API_KEY]);\n\n  return (\n    <div className=\"content\">\n      {type !== 'none' && <Flash type={type} message={message} duration=\"5000\" setType={setType} />}\n      <div className=\"cardGrid\">\n        {Object.entries(devices).map(([id, device]) => (\n          <Device\n            key={id}\n            api_key={API_KEY}\n            id={id}\n            device={device}\n            setType={setType}\n            setMessage={setMessage}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\nexport default Devices","import { useState } from \"react\";\nimport { FaTimes } from \"react-icons/fa\";\nimport FlashMessage from 'react-flash-message'\n\nexport default function Flash({type, message, duration, setType}) {\n\n    return (\n        <FlashMessage duration={duration} persistOnHover={true}>\n        <div className=\"notificationContainer\">\n            <div className={`notification ${type}`}><p>{message}</p><div className=\"icon\"><FaTimes onClick={() => setType('none')}/></div></div>\n        </div>\n        </FlashMessage>\n    );\n    }\n"],"sourceRoot":""}